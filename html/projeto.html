<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/projeto.css">
    <title>CodeConnect</title>
</head>

<body>
    <img src="../img/smbolo.png"class="simbolo__cima mobile2">
    <header class="cabecalho mobile">
        <a href="feed.html"><img src="../img/Logo.svg" alt="Logo" class="Logo"></a>
        <a href="publicar.html" class="botao__publicar">Publicar</a>
    </header>
    <aside class="menu__flutuante">
        <div class="desktop">
            <a href="feed.html"></a><img src="../img/Logo.svg" alt="Logo" class="Logo desktop">
        </div>
        <nav class="menu__opcoes">
            <ul class="lista__links">
                <div class="desktop">
                    <li class="menu__opcao">
                        <a href="publicar.html" class="botao__publicar desktop">Publicar</a>
                    </li>
                </div>
                <li class="menu__opcao"><a href="feed.html" class="menu__link feed">
                    <span class="material-icons">feed</span>
                    <p>Feed</p>
                </a></li>
                <li class="menu__opcao"><a href="perfil.html" class="menu__link perfil">
                    <span class="material-icons">account_circle</span>
                    <p>Perfil</p>
                </a></li>
                <li class="menu__opcao"><a href="about.html" class="menu__link about">
                    <span class="material-icons">info</span>
                    <p>Sobre nós</p>
                </a></li>
                <li class="menu__opcao"><a href="../index.html" class="menu__link sair">
                    <span class="material-icons">logout</span>
                    <p>Sair</p>
                </a></li>
            </ul>
        </nav>
    </aside>
    <main class="container__principal">
        <section class="post" id="post1">
            <a class="foto__post__container" href = "projeto.html">
                <img src="../img/card-publicao-code-editor1.png" id="post1Img">
            </a>
            <div class="info__post__container">
                <h3 class="nome__publicacao" id="post1Nome">Título do post em duas linhas</h3>
                <p class="descricao__publicacao" id="post1Descricao">Lorem ipsum dolor sit amet consectetur adipisicing elit. Pariatur illo corporis nobis sunt, aut earum repudiandae recusandae repellendus mollitia porro a aperiam exercitationem itaque nesciunt cupiditate praesentium. Voluptas, quasi!</p>
                <div class="acoes__post__container">
                    <div class="botoes__post">
                        <button class="acao__post"><span class="material-icons">code</span><p>12</p></button>
                        <button class="acao__post"><span class="material-icons">share</span><p>12</p></button>
                        <button class="acao__post"><span class="material-icons">chat</span><p>12</p></button>
                    </div>
                    <div class="criador__post__container">
                        <img src="../img/card-publicao-criador.svg" alt="Imagem do criador desse post"><p class="criador__post__nome">@Julio</p>
                    </div>
                </div>
            </div>
        </section>
        <section class="detalhes__post">
            <h3 class="codigo__titulo">Código:</h3>
            <textarea wrap="soft" rows="9" class ="descricao__projeto" readonly>
                async function publicarProjeto(projeto) {
                    return new Promise((resolve, reject) => {
                      //para simular a conexão de um banco de dados
                      setTimeout(() => {
                        let conexaoBemSucedida = Math.random() > 0.01;
                        if (conexaoBemSucedida) {
                          const projetoJSON = JSON.stringify(projeto);
                          sessionStorage.setItem("projeto", projetoJSON);
                          resolve(projetoJSON);
                        } else {
                          reject("Para simular a realidade, tem 1% de chance de dar errado... pois tá aí...");
                        }
                      }, 2000);
                    })
                  }
                  const botaoPublicar = document.getElementById("botaoPublicar");
                  
                  botaoPublicar.addEventListener("click", async (event) => {
                    event.preventDefault();
                    if (nomeProjeto.value.trim() == "" ||imagemPrincipal.src == "../img/imagem1.png" || descricaoProjeto.value.trim() == "") {
                      alert("Preencha todos os dados")
                    } else {
                      const projeto = {
                        nome: nomeProjeto.value,
                        imagem: imagemPrincipal.src,
                        descricao: descricaoProjeto.value,
                        tags: Array.from(listaTags.querySelectorAll("p")).map((tag) => tag.textContent)
                      }
                      try {
                        resultado = await publicarProjeto(projeto);
                        if (resultado) {
                          alert("Projeto publicado com sucesso!");
                          setTimeout(() => {
                            window.location.href = "feed.html"
                          }, 3000);
                        }
                      } catch (error) {
                        alert(error);
                      }
                    }
                  });</textarea>
        </section>
        <section class="comentarios">
            <h2 class="comentarios__titulo">Comentarios</h2>
            <ul class="comentarios__lista">
                <li class="comentario__container">
                    <div class="comentario">
                        <div class="usuario">
                        <img src="../img/user-circle-fill.svg" alt="Imagem do usuario">
                        <p class="nome__usuario">@marcia</p></div>
                        <p class="comentario__texto">Achei muito bom seu código, @julio, parabéns!</p>
                    </div>
                    <p class="comentario__acao">Responder</p>
                    <label class="ver__respostas__container"><hr><p id="verRespostas">ver resposta</p></label>
                    <hr>
                </li>
                <li class="comentario__container">
                    <div class="comentario">
                        <div class="usuario">
                        <img src="../img/user-circle-fill (1).svg" alt="Imagem do usuario">
                        <p class="nome__usuario">@Gabriel_luz</p></div>
                        <p class="comentario__texto">Quanto tempo você levou para finalizar esse projeto?</p>
                    </div>
                    <p class="comentario__acao">Responder</p>
                    <label class="ver__respostas__container"><hr><p id="ocultarRespostas">Ocultar respostas</p></label>
                    <div class="respostas__container">
                        <div class="comentario">
                            <div class="usuario">
                            <img src="../img/card-publicao-criador.svg" alt="Imagem do usuario">
                            <p class="nome__usuario">@julio</p></div>
                            <p class="comentario__texto">Até que foi rápido, uns 3 dias!</p>
                        </div>
                        <p class="comentario__acao">Responder</p>
                    </div>
                    <hr>
                </li>
                <li class="comentario__container">
                    <div class="comentario">
                        <div class="usuario">
                        <img src="../img/user-circle-fill (2).svg" alt="Imagem do usuario">
                        <p class="nome__usuario">@Marcela_Linz</p></div>
                        <p class="comentario__texto">Espero chegar um dia nesse nível! Muito bom!</p>
                    </div>
                    <p class="comentario__acao">Responder</p>
                    <label class="ver__respostas__container"><hr><p id="ocultarRespostas">Ocultar respostas</p></label>
                    <div class="respostas__container">
                        <div class="comentario">
                            <div class="usuario">
                            <img src="../img/card-publicao-criador.svg" alt="Imagem do usuario">
                            <p class="nome__usuario">@julio</p></div>
                            <p class="comentario__texto">Poxa, obrigado Marcela, tenho certeza que você vai mandar muito bem, se precisar de ajuda é só entrar em contato!</p>
                        </div>
                        <p class="comentario__acao">Responder</p>
                        <div class="comentario">
                            <div class="usuario">
                            <img src="../img/user-circle-fill (2).svg" alt="Imagem do usuario">
                            <p class="nome__usuario">@Marcela_Linz</p></div>
                            <p class="comentario__texto">Oba! Vou mandar uma mensagem!</p>
                        </div>
                        <p class="comentario__acao">Responder</p>
                    </div>
                    <hr>
                </li>
            </ul>
        </section>
    </main>
    <script src="../Javascript/projeto.js"></script>
</body>

</html>